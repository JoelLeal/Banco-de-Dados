DROP TABLE PAGAMENTO CASCADE CONSTRAINT;
DROP TABLE LANCAMENTO CASCADE CONSTRAINT;
DROP TABLE FUNCIONARIO CASCADE CONSTRAINT;
DROP TABLE VERBA CASCADE CONSTRAINT;

CREATE TABLE FUNCIONARIO
(MATRICULA NUMBER(10) PRIMARY KEY,
NOME VARCHAR2(60),
SALARIO_BASE NUMBER(12,2),
JORNADA NUMBER(3));

INSERT INTO FUNCIONARIO VALUES(1,'JOSÉ',2500,200);
INSERT INTO FUNCIONARIO VALUES(2,'JOÃO',3500,200);

CREATE TABLE VERBA
(CODIGO NUMBER(3) PRIMARY KEY,
DESCRICAO VARCHAR2(50),
REFERENCIA CHAR(1) CHECK(REFERENCIA='P' OR REFERENCIA='H' OR REFERENCIA='D'),
PORCENTAGEM NUMBER(6,2));

INSERT INTO VERBA VALUES(1,'ADICIONAL NOTURNO','P',30);
INSERT INTO VERBA VALUES(2,'HORA-EXTRA 50%','H',1.5);
INSERT INTO VERBA VALUES(3,'FALTAS EM DIAS','D',0);
INSERT INTO VERBA VALUES(4,'GRATIFICACAO FUNÇÃO','P',15);

CREATE TABLE LANCAMENTO
(MATRICULA NUMBER(10) REFERENCES FUNCIONARIO(MATRICULA),
VERBA NUMBER(3) REFERENCES VERBA(CODIGO),
QTDE NUMBER(6,2),
PRIMARY KEY(MATRICULA,VERBA));

INSERT INTO LANCAMENTO VALUES(1,1,0);
INSERT INTO LANCAMENTO VALUES(1,2,10);
INSERT INTO LANCAMENTO VALUES(1,3,1);
INSERT INTO LANCAMENTO VALUES(1,4,0);
INSERT INTO LANCAMENTO VALUES(2,1,0);
INSERT INTO LANCAMENTO VALUES(2,2,25);
INSERT INTO LANCAMENTO VALUES(2,3,2);
INSERT INTO LANCAMENTO VALUES(2,4,0);

CREATE TABLE PAGAMENTO
(MATRICULA NUMBER(10),
NOME VARCHAR2(60),
VERBA NUMBER(3),
DESCRICAO VARCHAR2(50),
QTDE NUMBER(6,2),
VALOR NUMBER(12,2));

FAZER UM BLOCO PL/SQL COM CURSOR, QUE CALCULA AS VERBAS LANÇADAS PARA CADA UM DOS FUNCIONÁRIOS E GRAVE NA TABELA PAGAMENTO.

SEGUE AS FÓRMULAS DAS REGRAS DE NEGÓCIO:

referencia = 'P' 
  v_valor := (v_salario_base*v_porcentagem)/100;

referencia = 'H' 
  v_valor := ((v_salario_base/v_jornada)*v_qtde)*v_porcentagem;  

referencia = 'D' 
  v_valor := (v_salario_base/30)*v_qtde;
    

